(this["webpackJsonpnetflix-datastax-clone"]=this["webpackJsonpnetflix-datastax-clone"]||[]).push([[0],{12:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),a=n(6),r=n.n(a),i=n(4),o=n(2),j=n(3),u=n.n(j),l=(n(12),n(0)),b=function(e){var t=e.movie,n=Object(c.useState)(!1),s=Object(o.a)(n,2),a=s[0],r=s[1];return Object(l.jsxs)("div",{className:"card",onMouseEnter:function(){return r(!0)},onMouseLeave:function(){return r(!1)},children:[!a&&Object(l.jsx)("video",{className:"video",controls:!0,children:Object(l.jsx)("source",{src:t.thumbnail,type:"video/mp4"})}),a&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("video",{className:"video",controls:!0,autoPlay:!0,loop:!0,children:Object(l.jsx)("source",{src:t.thumbnail,type:"video/mp4"})}),Object(l.jsx)("div",{className:"info-box",children:Object(l.jsx)("p",{children:t.title})})]})]})},d=function(e){var t=e.genre,n=Object(c.useState)(null),s=Object(o.a)(n,2),a=s[0],r=s[1],j=Object(c.useState)(null),d=Object(o.a)(j,2),f=d[0],O=d[1],h=function(){var e=Object(i.a)(u.a.mark((function e(){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/.netlify/functions/getMovies",{method:"POST",body:JSON.stringify({genre:t,pageState:f})});case 2:return n=e.sent,e.next=5,n.json();case 5:c=e.sent,r(c.data.movies_by_genre.values),O(c.data.movies_by_genre.pageState);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){h()}),[]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h2",{id:t,children:t}),a&&Object(l.jsxs)("div",{className:"movie-section",children:[a.map((function(e,t){return Object(l.jsx)(b,{movie:e},e.title)})),Object(l.jsx)("div",{className:"more-button",onClick:function(){O(f),h()},children:Object(l.jsx)("i",{className:"fas fa-angle-right"})})]})]})},f=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],s=t[1],a=function(){var e=Object(i.a)(u.a.mark((function e(){var t,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/.netlify/functions/getMovies",{method:"POST",body:JSON.stringify({genre:"Sci-Fi",pageState:null})});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,c=n.data.movies_by_genre.values,s(c[Math.floor(Math.random()*c.length)]);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){a()}),[]),Object(l.jsx)(l.Fragment,{children:n&&Object(l.jsxs)("div",{className:"hero",children:[Object(l.jsx)("video",{className:"hero-video",muted:!0,controls:!0,autoPlay:!0,loop:!0,children:Object(l.jsx)("source",{src:n.thumbnail,type:"video/mp4"})}),Object(l.jsxs)("div",{className:"info-section",children:[Object(l.jsx)("h3",{className:"hero-blurb",children:n.synopsis}),Object(l.jsxs)("div",{className:"button-section",children:[Object(l.jsxs)("div",{className:"button play",children:[Object(l.jsx)("span",{children:Object(l.jsx)("i",{className:"fas fa-play"})}),"Play"]}),Object(l.jsxs)("div",{className:"button more",children:[Object(l.jsx)("span",{children:Object(l.jsx)("i",{className:"fas fa-info-circle"})}),"More info"]})]})]})]})})},O=function(){return Object(l.jsx)("div",{className:"navbar",children:Object(l.jsxs)("ul",{children:[Object(l.jsx)("li",{children:Object(l.jsx)("div",{className:"logo"})}),Object(l.jsx)("li",{children:Object(l.jsx)("a",{href:"/",children:"Home"})})]})})},h=function(){var e=Object(c.useState)(0),t=Object(o.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(null),r=Object(o.a)(a,2),j=r[0],b=r[1],h=Object(c.useState)(null),x=Object(o.a)(h,2),v=x[0],m=x[1],p=Object(c.useState)(!1),g=Object(o.a)(p,2),y=g[0],N=g[1],S=function(){var e=Object(i.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=11;break}return N(!0),e.next=4,fetch("/.netlify/functions/getGenres",{method:"POST",body:JSON.stringify({pageState:j,pageSize:4})});case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,b(n.data.reference_list.pageState),m((function(e){return(e||[]).concat(n.data.reference_list.values)})),N(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){s(1)}),[]),Object(c.useEffect)((function(){var e=4*n,t=(v||[]).length;e>t&&!(t>0&&null===j)&&S()}),[n]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(O,{}),Object(l.jsx)(f,{}),v&&Object(l.jsx)("div",{className:"container",children:Object.values(v).map((function(e){return Object(l.jsx)(d,{genre:e.value},e.value)}))}),Object(l.jsx)("div",{className:"page-end",onMouseEnter:function(){s((function(e){return e+1}))}})]})};r.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(h,{})}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.f6ec5017.chunk.js.map