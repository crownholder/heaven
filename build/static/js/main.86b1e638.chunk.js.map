{"version":3,"sources":["components/Card.js","components/Section.js","components/HeroSection.js","components/NavBar.js","App.js","index.js"],"names":["Card","movie","useState","isShown","setIsShown","className","onMouseEnter","onMouseLeave","controls","src","thumbnail","type","autoPlay","loop","title","Section","genre","movies","setMovies","pageState","setPageState","fetchData","a","fetch","method","body","JSON","stringify","response","json","responseBody","data","movies_by_genre","values","useEffect","id","map","index","onClick","HeroSection","setMovie","Math","floor","random","length","muted","synopsis","NavBar","href","App","requestedPage","setRequestedPage","genres","setGenres","isFetching","setIsFetching","pageSize","reference_list","gs","concat","goalItems","currentItems","Object","value","np","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.86b1e638.chunk.js","sourcesContent":["import { useState } from \"react\"\r\n\r\nconst Card = ({ movie }) => {\r\n  const [isShown, setIsShown] = useState(false)\r\n\r\n  return (\r\n    <div\r\n      className=\"card\"\r\n      onMouseEnter={() => setIsShown(true)}\r\n      onMouseLeave={() => setIsShown(false)}\r\n    >\r\n      {!isShown && (\r\n        <video className=\"video\" controls>\r\n          <source src={movie.thumbnail} type=\"video/mp4\" />\r\n        </video>\r\n      )}\r\n\r\n      {isShown && (\r\n        <>\r\n          <video className=\"video\" controls autoPlay={true} loop>\r\n            <source src={movie.thumbnail} type=\"video/mp4\" />\r\n          </video>\r\n          <div className=\"info-box\">\r\n            <p>{movie.title}</p>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Card\r\n","import { useEffect, useState } from \"react\"\r\nimport Card from \"./Card\"\r\n\r\nconst Section = ({ genre }) => {\r\n  const [movies, setMovies] = useState(null)\r\n  const [pageState, setPageState] = useState(null)\r\n\r\n  const fetchData = async () => {\r\n    const response = await fetch(\"/.netlify/functions/getMovies\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ genre: genre, pageState: pageState }),\r\n    })\r\n    const responseBody = await response.json()\r\n    setMovies(responseBody.data.movies_by_genre.values)\r\n    setPageState(responseBody.data.movies_by_genre.pageState)\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchData()\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [])\r\n\r\n  return (\r\n    <>\r\n      <h2 id={genre}>{genre}</h2>\r\n      {movies && (\r\n        <div className=\"movie-section\">\r\n          {movies.map((movie, index) => (\r\n            <Card key={movie.title} movie={movie} />\r\n          ))}\r\n          <div\r\n            className=\"more-button\"\r\n            onClick={() => {\r\n              setPageState(pageState)\r\n              fetchData()\r\n            }}\r\n          >\r\n            <i className=\"fas fa-angle-right\"></i>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Section\r\n","import { useState, useEffect } from \"react\"\r\n\r\nconst HeroSection = () => {\r\n  const [movie, setMovie] = useState(null)\r\n  const pageState = null\r\n\r\n  const fetchData = async () => {\r\n    const response = await fetch(\"/.netlify/functions/getMovies\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ genre: \"Sci-Fi\", pageState: pageState }),\r\n    })\r\n    const responseBody = await response.json()\r\n    const movies = responseBody.data.movies_by_genre.values\r\n    setMovie(movies[Math.floor(Math.random() * movies.length)])\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchData()\r\n  }, [])\r\n\r\n  return (\r\n    <>\r\n      {movie && (\r\n        <div className=\"hero\">\r\n          <video className=\"hero-video\" muted controls autoPlay={true} loop>\r\n            <source src={movie.thumbnail} type=\"video/mp4\" />\r\n          </video>\r\n\r\n          <div className=\"info-section\">\r\n            <h3 className=\"hero-blurb\">{movie.synopsis}</h3>\r\n            <div className=\"button-section\">\r\n              <div className=\"button play\">\r\n                <span>\r\n                  <i className=\"fas fa-play\"></i>\r\n                </span>\r\n                Play\r\n              </div>\r\n              <div className=\"button more\">\r\n                <span>\r\n                  <i className=\"fas fa-info-circle\"></i>\r\n                </span>\r\n                More info\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default HeroSection\r\n","const NavBar = () => {\r\n  return (\r\n    <div className=\"navbar align-center\">\r\n      <ul>\r\n        <li>\r\n          <div className=\"logo align-left\"></div>\r\n        </li>\r\n        <li>\r\n          <a href=\"/\">MOVIES</a>\r\n        </li>\r\n        <li>\r\n          <a href=\"/\">TV</a>\r\n        </li>\r\n        <li>\r\n          <a href=\"/\">LIVE</a>\r\n        </li>\r\n        <li>\r\n          <a href=\"/\">JUST ADDED</a>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default NavBar\r\n","import \"./App.css\"\r\nimport { useEffect, useState } from \"react\"\r\nimport Section from \"./components/Section\"\r\nimport HeroSection from \"./components/HeroSection\"\r\nimport NavBar from \"./components/NavBar\"\r\n\r\nconst App = () => {\r\n  const pageSize = 4\r\n  const [requestedPage, setRequestedPage] = useState(0)\r\n  const [pageState, setPageState] = useState(null)\r\n  const [genres, setGenres] = useState(null)\r\n  const [isFetching, setIsFetching] = useState(false)\r\n\r\n  const fetchData = async () => {\r\n    if (! isFetching)  {\r\n      setIsFetching(true)\r\n      const response = await fetch(\"/.netlify/functions/getGenres\", {\r\n        method: \"POST\",\r\n        body: JSON.stringify({pageState, pageSize}),\r\n      })\r\n      const responseBody = await response.json()\r\n      setPageState(responseBody.data.reference_list.pageState)\r\n      setGenres(gs => (gs || []).concat(responseBody.data.reference_list.values))\r\n      setIsFetching(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    // we trigger the first page of genres at the beginning\r\n    setRequestedPage(1)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const goalItems = pageSize * requestedPage\r\n    const currentItems = (genres || []).length\r\n    const bottomReached = currentItems > 0 && pageState === null\r\n    // we ask for more genres if we are not at bottom of infinite scroll\r\n    // (and if there are less items than the nominally requested pages)\r\n    if ((goalItems > currentItems) && !bottomReached){\r\n      fetchData()\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [requestedPage])\r\n\r\n  return (\r\n    <>\r\n      <NavBar />\r\n      <HeroSection />\r\n      {genres && (\r\n        <div className=\"container\">\r\n          {Object.values(genres).map((genre) => (\r\n            <Section key={genre.value} genre={genre.value} />\r\n          ))}\r\n        </div>\r\n      )}\r\n      <div\r\n        className=\"page-end\"\r\n        onMouseEnter={() => {\r\n          setRequestedPage( np => np + 1 )\r\n        }}\r\n      />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n)\r\n"],"sourceRoot":""}